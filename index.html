<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CBT Platform</title>
    <style>  
      * {  
        margin: 0;  
        padding: 0;  
        box-sizing: border-box;  
      }  
      body {  
        font-family: Arial, Helvetica, sans-serif;  
        line-height: 1.6;  
        padding: 20px;  
        overflow-x: hidden;  
      }  
      .container {  
        max-width: 1200px;  
        margin: 0 auto;  
        text-align: center;  
      }  
      .timer {  
        display: flex;  
        justify-content: center;  
        gap: 20px;  
        margin: 20px 0;  
      }  
      .timer button {  
        font-size: 24px;  
        padding: 10px 20px;  
        border-radius: 5px;  
        background-color: #dddada;  
        border: none;  
        font-family: "Courier New", Courier, monospace;  
        font-weight: bold;  
      }  
      #startBTN {  
        margin: 20px 0;  
        font-size: 18px;  
        padding: 10px 30px;  
        border-radius: 5px;  
        background-color: #dddada;  
        border: none;  
        cursor: pointer;  
      }  
      .displayy {  
        width: 100%;  
        max-width: 800px;  
        margin: 0 auto;  
        font-size: 20px;  
      }  
      .pagee {  
        display: flex;  
        margin-left: 10%;  
        gap: 30px;  
      }  
      .profile {  
        font-size: 18px;  
        font-family: Arial, Helvetica, sans-serif;  
        background-color: rgb(202, 227, 250);  
        padding: 20px;  
        border-radius: 10px;  
        flex: 1;  
      }  
      img {  
        width: 180px;  
        height: 180px;  
        border-radius: 100px;  
        display: block;  
        margin: 0 auto;  
      }  
      .buttons button {  
        font-size: 18px;  
        padding: 10px 20px;  
        border-radius: 5px;  
        background-color: #0b0eb8;  
        border: none;  
        color: white;  
        cursor: pointer;  
      }  
      .question-container {  
        margin-top: 20px;  
        font-size: 24px;  
        padding: 10px;  
        border-radius: 5px;  
      }  
      #displayResult {  
        margin-top: 20px;  
        font-size: 24px;  
        padding: 10px;  
        border-radius: 5px;  
        text-align: center;  
      }  
      #previousBTN{
        display: none;
      }
      #nextBTN{
        display: none;
      }
      #submitBTN{
        display: none;
      }
      #displayButtons {  
        display: flex;  
        gap: 10px;  
        justify-content: center;  
        margin-top: 20px;  
      }  

      @media (max-width: 968px) {  
        .container {  
          padding: 10px;  
        }  
        .timer button {  
          font-size: 20px;  
        }  
        .displayy {  
          font-size: 18px;  
          margin-left: 0;  
        }  
        .pagee {  
          display: flex;  
          flex-direction: column;  
          align-items: center;  
          margin-left: 0;  
          gap: 20px;  
        }  
        .profile {  
          width: 100%;  
          max-width: 300px;  
        }  
      }  

      @media (max-width: 600px) {  
        body {  
          padding: 10px;  
        }  
        .timer button {  
          font-size: 18px;  
          padding: 8px 15px;  
        }  
        .displayy {  
          font-size: 16px;  
        }  
        .question-container {  
          font-size: 20px;  
          padding: 5px;  
        }  
        #startBTN {  
          padding: 8px 15px;  
          font-size: 16px;  
        }  
      }  

      @media (max-width: 480px) {  
        .timer button {  
          font-size: 15px;  
          padding: 6px 12px;  
        }  
        .displayy {  
          font-size: 14px;  
        }  
        .question-container {  
          font-size: 18px;  
        }  
        .buttons button {  
          font-size: 14px;  
          padding: 8px 15px;  
        }  
      }  
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Computer Based Test</h1>
      </div>

      <div class="timer" id="timer">
        <button id="minsBTN">02</button>
        <button id="secsBTN">00</button>
      </div>
      <button id="startBTN">Start</button>
    </div>

    <h1 id="displayResult"></h1>

    <div class="pagee">
      <!-- <div class="profile" id="profileDiv">
        <img src="./AIFY6855.JPG" alt="" />
        <h3>Full Name:</h3>
        <p id="fullName"></p>
        <h3>Matric Number:</h3>
        <p id="matricNum"></p>
      </div> -->
      <div class="displayy" id="displayDIVV">
        <div class="Instructions" id="displayInstructions">
          <h2>Instructions</h2>
          <p>Attempt all Questions</p>
          <p>You have just 2mins to answer all Questions.</p>
          <p>Goodluck</p>
        </div>

        <div class="displayResult" id="displayResult">
          <p id="result"></p>
        </div>

        <div id="displayQuestions"></div>
        <br />
        <div class="buttons" id="buttonDIV">
          <button id="previousBTN">Previous</button>
          <button id="nextBTN">Next</button>
          <button id="submitBTN">Submit</button>
        </div>
      </div>
    </div>

    <script>
      const questions = [
        {
          question: "What is Javascript?",
          options: [
            "A programming language",
            "A markup language",
            "A styling language",
            "A scripting language",
          ],
          answer: "A scripting language",
        },
        {
          question: "What is HTML?",
          options: [
            "A programming language",
            "A markup language",
            "A styling language",
            "A scripting language",
          ],
          answer: "A markup language",
        },
        {
          question: "What is CSS?",
          options: [
            "A programming language",
            "A markup language",
            "A styling language",
            "A scripting language",
          ],
          answer: "A styling language",
        },
        {
          question: "What is PHP?",
          options: [
            "A programming language",
            "A markup language",
            "A styling language",
            "A scripting language",
          ],
          answer: "A programming language",
        },
        {
          question: "What is Python?",
          options: [
            "A programming language",
            "A markup language",
            "A styling language",
            "A scripting language",
          ],
          answer: "A programming language",
        },
      ];

      let currentQuestion = 0;
      let timeLeft = 1 * 60; // 10 minutes in seconds
      let timerId = null;
      let answered = new Array(questions.length).fill(null);

      function updateTimer() {
        const mins = Math.floor(timeLeft / 60);
        const secs = timeLeft % 60;
        document.getElementById("minsBTN").textContent = mins
          .toString()
          .padStart(2, "0");
        document.getElementById("secsBTN").textContent = secs
          .toString()
          .padStart(2, "0");
      }

      function displayQuestion() {
        const displayDiv = document.getElementById("displayQuestions");
        const nextButton = document.getElementById("nextBTN");
        const previousButton = document.getElementById("previousBTN");
        const submitButton = document.getElementById("submitBTN");
        const question = questions[currentQuestion];

        let html = `  
                <div class="question-container">   
                    <h3>${currentQuestion + 1}. ${question.question}</h3>  
                    ${question.options
                      .map(
                        (option, optIndex) => `  
                        <div class="option-container">  
                            <input type="radio"   
                                  name="question${currentQuestion}"   
                                  value="${option}"  
                                  id="${currentQuestion}_${optIndex}"  
                                  ${
                                    answered[currentQuestion] === option
                                      ? "checked"
                                      : ""
                                  }>  
                            <label for="${currentQuestion}_${optIndex}">${option}</label>  
                        </div>`
                      )
                      .join("")}  
                </div>`;

        displayDiv.innerHTML = html;

        if (currentQuestion === 0) {
          nextButton.style.display = "inline"; // Or "inline", "inline-block", etc., depending on your layout
        }

        if (currentQuestion >= 1) {
          previousButton.style.display = "inline";
        }

        if (currentQuestion === questions.length - 1) {
          submitButton.style.display = "inline";
        }
      }

      function displayInfo() {  
      const fullNameElement = document.getElementById('fullName');  
      const matricNumElement = document.getElementById('matricNum');  

        // Retreving stored credentials from localStorage
          const storedName = actualData.matricNumber;
          const storedPassword = actualData.password;

        if (fullName !== null) {  
            fullNameElement.textContent = fullName.actualData;  
        }  
        if (matricNumber !== null) {  
            matricNumElement.textContent = matricNumber.actualData;  
        }  
    }  

        // Call the function when the page loads  
        document.addEventListener('DOMContentLoaded', displayInfo);  

      function startQuiz() {
        document.getElementById("startBTN").style.display = "none";
        document.getElementById("displayInstructions").style.display = "none";

        currentQuestion = 0;
        timeLeft = 2 * 60;
        answered = new Array(questions.length).fill(null);
        updateTimer();
        displayQuestion();
        startTimer();
        showPreviousButton(); // Call the function when the quiz starts
      }

      function startTimer() {
        timerId = setInterval(() => {
          timeLeft--;
          updateTimer();

          if (timeLeft <= 0) {
            clearInterval(timerId);
            document.getElementById("submitBTN").click();
          }
        }, 1000);
      }

      document.getElementById("startBTN").addEventListener("click", startQuiz);

      document.getElementById("submitBTN").addEventListener("click", () => {
        let canSubmit = confirm("Are you sure you want to submit?");
        if (canSubmit) {
          clearInterval(timerId);
          calculateScore();
        }
      });

      document.getElementById("nextBTN").addEventListener("click", () => {
        if (currentQuestion < questions.length - 1) {
          answered[currentQuestion] =
            document.querySelector(
              `input[name="question${currentQuestion}"]:checked`
            )?.value || null;
          currentQuestion++;
          displayQuestion();
        }
      });

      document.getElementById("previousBTN").addEventListener("click", () => {
        if (currentQuestion > 0) {
          answered[currentQuestion] =
            document.querySelector(
              `input[name="question${currentQuestion}"]:checked`
            )?.value || null;
          currentQuestion--;
          displayQuestion();
        }
      });

      function calculateScore() {
        const fullName = localStorage.getItem('fullName');
        let score = 0;
        questions.forEach((quest, i) => {
          if (answered[i] && answered[i] === quest.answer) {
            score++;
          }
        });

        // Display the result
        const resultElement = document.getElementById("displayResult");
        resultElement.textContent = ` ${fullName}, You score ${score} out of ${questions.length}`;
        resultElement.style.display = "block";

        // Remove the class "displayy" from the parent div
        const displayDiv = document.getElementById("displayDIVV");
        const profile = document.getElementById("profileDiv");
        const question = document.getElementById("displayQuestions");
        const button = document.getElementById("buttonDIV");
        question.style.display = "none";
        button.style.display = "none";
        profile.style.display = "none";
        displayDiv.parentElement.classList.remove("displayy");
        displayDiv.style.display = "none";

        // Hide the questions container
        displayDiv.style.display = "none";

        document.getElementById(
          "result"
        ).textContent = `You scored ${score} out of ${questions.length}`;
        window.scrollTo({ top: 0, behavior: "smooth" });
      }
    </script>
  </body>
</html>
